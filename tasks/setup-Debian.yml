---
- name: Ensure dependencies are installed.
  apt:
    name:
      - apt-transport-https
      - gnupg2
    state: present

- name: Add Elasticsearch apt key.
  apt_key:
    url: '{{ kibana_repository_url }}/GPG-KEY-elasticsearch'
    state: present

- name: Add Kibana repository.
  apt_repository:
    repo: 'deb {{ kibana_repository_url }}/packages/{{ kibana_version }}/apt stable main'
    state: present
    update_cache: true
